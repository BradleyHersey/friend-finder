<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta name="description" content="Find a friend by answering some simple questions">
    <title>Friend Finder</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" href="https://i.pinimg.com/564x/fe/8a/da/fe8ada4506e556737c4413a614b13033--bh-logo-buddhas-hand.jpg">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4"
        crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <link rel="stylesheet" href="style.css">

</head>



<body>


    <div class="modal fade" id="myModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">And your best match is...</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p id='friendName'></p>
                    <img id='friendImg' src="" height='200'>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <h1>Survey Questions</h1>
        <hr>
        <h3>About You</h3>
        <div class="form-group">
            <label for="Name">Name (Required)</label>
            <input type="text" class='form-control' id='name' placeholder="brad">
        </div>
        <div class="form-group">
            <label for="image">Link to Photo Image (Required)</label>
            <input type="text" class='form-control' id='image' placeholder="https://">
            </form>
        </div>
        <hr>
        <h3>Question 1</h3>
        <h4>Where would you move to?</h4>
        <div class="form-group">
            <select name="quest1" id="quest1">
                <option value="">Select an Option</option>
                <option value="1">Ohio </option>
                <option value="2">New York</option>
                <option value="3">California</option>
                <option value="4">Texas</option>
                <option value="5">Florida</option>
            </select>
        </div>
        <h3>Question 2</h3>
        <h4>Pick an color.</h4>
        <div class="form-group">
            <select name="quest2" id="quest2">
                <option value="">Select an Option</option>
                <option value="1">Green </option>
                <option value="2">Blue</option>
                <option value="3">Red</option>
                <option value="4">Black</option>
                <option value="5">Yellow </option>
            </select>
        </div>
        <h3>Question 3</h3>
        <h4>Which one of this stand out to you?</h4>
        <div class="form-group">
            <select name="quest3" id="quest3">
                <option value="">Select an Option</option>
                <option value="1">Love</option>
                <option value="2">Fighting</option>
                <option value="3">Wild</option>
                <option value="4">Sky</option>
                <option value="5">Dreamer</option>
            </select>
        </div>
        <h3>Question 4</h3>
        <h4>Which one is your fear?</h4>
        <div class="form-group">
            <select name="quest4" id="quest4">
                <option value="">Select an Option</option>
                <option value="1">Spiders</option>
                <option value="2">Snakes</option>
                <option value="3">Feet</option>
                <option value="4">Germs</option>
                <option value="5">Bees</option>
            </select>
        </div>
        <h3>Question 5</h3>
        <h4>Pick your car.</h4>
        <div class="form-group">
            <select name="quest5" id="quest5">
                <option value="">Select an Option</option>
                <option value="1">Telsa </option>
                <option value="2">Bmw</option>
                <option value="3">Ford</option>
                <option value="4">GM</option>
                <option value="5">Honda</option>
            </select>
        </div>
        <h3>Question 6</h3>
        <h4>What do you do on the first Date?</h4>
        <div class="form-group">
            <select name="quest6" id="quest6">
                <option value="">Select an Option</option>
                <option value="1">Walk on the beach.</option>
                <option value="2">Paintball.</option>
                <option value="3">Dinner for two. </option>
                <option value="4">Long drive.</option>
                <option value="5">Netflix and chill.</option>
            </select>
        </div>
        <h3>Question 7</h3>
        <h4>Choose a number from 1 to 5. </h4>
        <div class="form-group">
            <select name="quest7" id="quest7">
                <option value="">Select an Option</option>
                <option value="1">1 </option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 </option>
            </select>
        </div>
        <h3>Question 8</h3>
        <h4>Worst thing to do on a first date .</h4>
        <div class="form-group">
            <select name="quest8" id="quest8">
                <option value="">Select an Option</option>
                <option value="1">Pick your nose.</option>
                <option value="2">Ask what color her/he's moms bra is.</option>
                <option value="3">Be late for the date.</option>
                <option value="4">Call the date by your ex's name.</option>
                <option value="5">You do all the talking.</option>
            </select>
        </div>
        <h3>Question 9</h3>
        <h4>10x10=?</h4>
        <div class="form-group">
            <select name="quest9" id="quest9">
                <option value="">Select an Option</option>
                <option value="1">100 </option>
                <option value="2">200</option>
                <option value="3">300</option>
                <option value="4">400</option>
                <option value="5">500</option>
            </select>
        </div>
        <h3>Question 10</h3>
        <h4>Pick your meal.</h4>
        <div class="form-group">
            <select name="quest10" id="quest10">
                <option value="">Select an Option</option>
                <option value="1">Fried Chicken with chips</option>
                <option value="2">Med-rare steak with vegs</option>
                <option value="3">Pizza</option>
                <option value="4">Salad only</option>
                <option value="5">Bacon and eggs with bake beans</option>
            </select>
        </div>
        <div class="btn btn-primary btn-block" id="submit" data-toggle="modal" data-target="#myModal">
            <h4>
                <span class="glyphicon glyphicon-question-sign"></span> Find a friend</h4>
        </div>
        <hr>
        <div>
            <a href="/api/friend">API Friends List</a>
            <span>|</span>
            <a href="https://bradleyhersey.github.io/friend-finder/" target="_blank">Github Repo</a>
        </div>
        <br>
    </div>

    <div class="modal fade" id="myModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">And your best match is...</h5>

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <a href="http://localhost:" +PORT+ "/">
                            <span aria-hidden="true">&times;</span>
                        </a>
                    </button>
                </div>
                <div class="modal-body">
                    <p id='friendName'></p>
                    <img id='friendImg' src="" width="100%">
                </div>
                <div class="modal-footer">

                    <button type="button" class="btn">
                        <a href="http://localhost:" +PORT+ "/">Close</a>
                    </button>

                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
        crossorigin="anonymous"></script>
    <script type="text/javascript">
        console.log("WORKS");
        // var newUser = {};
        // var bestFriend = {
        //     diff: 0,
        //     name: "",
        //     image: ""
        // };


        // $('#submit').on('click', () => {
        $("#submit").on("click", function (event) {
            event.preventDefault();
            var userName = $('#name').val();
            var imag = $('#image').val();
            var ans1 = $('#quest1 :selected').val().trim();
            var ans2 = $('#quest2 :selected ').val().trim();
            var ans3 = $('#quest3 :selected').val().trim();
            var ans4 = $('#quest4 :selected').val().trim();
            var ans5 = $('#quest5 :selected').val().trim();
            var ans6 = $('#quest6 :selected').val().trim();
            var ans7 = $('#quest7 :selected').val().trim();
            var ans8 = $('#quest8 :selected').val().trim();
            var ans9 = $('#quest9 :selected').val().trim();
            var ans10 = $('#quest10 :selected').val().trim();

            if (userName === "" || imag === "" || ans1 === "" || ans2 === "" || ans3 === "" || ans4 === "" ||
                ans5 === "" || ans6 === "" || ans7 === "" || ans8 === "" || ans9 === "" || ans10 === "") {
                alert("Please fill in all fields");
                // } else {
                //     newUser = {
                //         name: userName,
                //         photo: imag,
                //         scores: [ans1, ans2, ans3, ans4, ans5, ans6, ans7, ans8, ans9, ans10] //finish here
                //     };
                //     console.log("NEW USER: ", newUser);
                //     findFriend(newUser.scores);

                //     setTimeout(postData, 1500);

                //     function postData() {
                //         $.post({
                //             url: '/api/friends',
                //             contentType: 'application/json'
                //         }, JSON.stringify(newUser));
            }
            // console.log("heelol");
            var userInput = {
                name: $('#name').val(),
                photo: $('#image').val(),
                scores: [
                    $('#quest1').val(),
                    $('#quest2').val(),
                    $('#quest3').val(),
                    $('#quest4').val(),
                    $('#quest5').val(),
                    $('#quest6').val(),
                    $('#quest7').val(),
                    $('#quest8').val(),
                    $('#quest9').val(),
                    $('#quest10').val()
                ]
            };
            // console.log('userInput = ' + JSON.stringify(userInput));

            // AJAX post the data to the friends API.
            $.post("/api/friend", userInput, function (data) {

                // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                $("#friendName").text(data.matchName);
                $("#friendImg").attr("src", data.matchImage);

                // $("#match-name").text(data.matchName);
                // $("#match-img").attr("src", data.matchImg);

                // Show the modal with the best match
                $("#myModal").modal("open");

            });
        });


        // function findFriend(scores) {

        //     $.get('/api/friends', (friends) => {
        //         console.log('hello baby');
        //         var count = 0;
        //         var arrayLength = friends.length;

        //         for (var i = 0; i < arrayLength; i++) {
        //             calcScoreDiff(scores, friends[i]);
        //             count++;
        //         }

        //         if (count === arrayLength) {
        //             console.log(bestFriend.name);
        //             $('#friendName').text(bestFriend.name);
        //             $('#friendImg').attr('src', bestFriend.image);
        //             $('#myModal').modal('toggle');
        //         }
        //     });
        // }

        // <!-- 
        //         function calcScoreDiff(user, friend) {

        //             var diff = 0;
        //             var count = 0;

        //             for (var i = 0; i < 10; i++) {
        //                 diff += Math.abs(user[i] - friend.scores[i]);
        //                 count++;
        //             }

        //             if (count === 5) {
        //                 if (diff < bestFriend.diff) {
        //                     bestFriend.diff = diff;
        //                     bestFriend.name = friend.name;
        //                     bestFriend.image = friend.photo;
        //                 } else {
        //                     return;
        //                 }
        //             }
        //         } -->
    </script>
    <!-- <style>
        body {
            background-image: url("https://www.cdn.tv2.no/images?imageId=7165242&x=0&y=15.95041322314&cropw=95.238095238095&croph=55.04132231405&width=940&height=666&compression=75");
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        .form-control {
            background-color: transparent;
        }

        h1,
        h2,
        h3,
        h4,
        label,
        input {
            color: white;
        }

        .btn {
            text-decoration: none;
            color: rgba(255, 255, 255, 0.8);
            background: rgb(145, 92, 182);
            padding: 15px 40px;
            border-radius: 4px;
            font-weight: normal;
            text-transform: uppercase;
            transition: all 0.2s ease-in-out;
        }

        #glow-button:hover {
            color: rgba(255, 255, 255, 1);
            box-shadow: 0 5px 15px rgba(145, 92, 182, .4);
        }
    </style> -->
</body>

</html>